import{j as r}from"./jsx-runtime.TBa3i5EZ.js";import{r as e}from"./index.CVf8TyFT.js";const j=({videoUrl:t,checkInterval:i=3e4})=>{const[c,f]=e.useState(t),[o,p]=e.useState(null),[s,d]=e.useState(!1),a=e.useRef(null);return e.useEffect(()=>{const u=async()=>{try{const n=(await fetch(t,{method:"HEAD"})).headers.get("Last-Modified");if(o&&n&&n!==o){d(!0);const h=new Date().getTime(),g=`${t}?t=${h}`;setTimeout(()=>{f(g),d(!1)},500)}p(n)}catch(l){console.error("Error checking for video updates:",l)}};u();const m=setInterval(u,i);return()=>clearInterval(m)},[t,i,o]),e.useEffect(()=>{a.current&&!s&&a.current.load()},[c,s]),r.jsxs("div",{className:"video-container",children:[s&&r.jsx("div",{className:"update-notification",children:r.jsx("span",{children:"New video detected! Loading..."})}),r.jsx("video",{ref:a,src:c,controls:!0,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:`mosaic-video ${s?"updating":""}`,children:"Your browser does not support the video tag."})]})};export{j as default};
